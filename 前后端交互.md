# 前后端交互
## 总原则
- JSON编码
- 向服务器发送请求
    - op 代表发送请求的操作
    - 具体内容（不一定有）
- 服务器返回的响应
    - code 代表操作是否正确进行
        - 0：成功
        - 1：账号/密码错误
        - 2：未登录
        - 3：信息已被接取、已取消或已完成
        - 4：无权限
        - 5：该用户已被注册
        - 6：余额不足
        - -1：参数错误
            - info：错误的具体信息
    - 具体内容

---
## 获取信息列表
- 用以在【信息界面】获取信息列表
- 发送
    - op=getInfoList
- 接收
    - code 0，2
    - infos （若干组）
        - id 信息的编号
        - title 信息标题
        - name 发布人姓名
        - score 发布人评分
        - deadline 截止时间
        - lasting 预计所需时间
        - gift 赏金
        - type 跑腿类型
## 获取信息详细
- 用以在【信息界面】获取信息详细
- 发送
    - op=getInfoById
    - id 信息的编号
- 接收
    - code 0,2，4
    - info
        - id 信息的编号
        - title 信息标题
        - name 发布人姓名
        - score 发布人评分
        - deadline 截止时间
        - lasting 预计所需时间
        - gift 赏金
        - type 跑腿类型
        - money 需要花费的金额
        - time 发布时间
        - content 具体内容
## 接单
- 发送
    - op=acceptInfo
    - id 信息的编号
- 接收
    - code 0,2,3
## 获取订单列表
- 发送
    - op=getOrderList
    - acceptbyme 是否为我接取的
        - 0：不是，则为我发布的信息
        - 1：是，是我接取的信息
- 接收
    - code 0,2
    - orders （若干组）
        - id 信息的编号
        - title 信息标题
        - name 发布人姓名
        - name2 接取人姓名
        - gift 赏金
        - type 跑腿类型
        - status 信息状态
            - 0 等待接单
            - 1 已接单，正在进行中
            - 2 已完成
            - 3 已取消
        - time 发布时间
        - accepttime 接取时间
        - deadline 截止时间
        - finishtime 完成时间
## 获取订单详细
- 发送
    - op=getOrderById
    - id 信息编号
    - acceptbyme
        - 0：不是，则为我发布的信息
        - 1：是，是我接取的信息
- 接收
    - code 0,2,4
    - order
        - id 信息的编号
        - title 信息标题
        - name 发布人姓名
        - phone 发布人手机
        - score 发布人评分
        - name2 接取人姓名
        - phone2 接取人手机
        - score2 接取人评分
        - deadline 截止时间
        - lasting 预计所需时间
        - gift 赏金
        - type 跑腿类型
        - money 需要花费的金额
        - time 发布时间
        - content 具体内容
        - status 信息状态
        - accepttime 接取时间
        - finishtime 完成时间
## 发布信息
- 发送
    - op=publishInfo
    - title 标题
    - type 跑腿类型
    - content 跑腿内容
    - money 跑腿需要的花费
    - gift 赏金
    - lasting 预计所需时间
    - deadline 截止时间
- 接收
    - code 0,2,6
    - id 信息编号
## 登录
- 发送
    - op=login
    - number
    - password
- 接收
    - code 0,1
    - id 用户编号
## 获取用户信息
- 发送
    - op=whoami
- 接收
    - code 0,2
    - number
    - phone
    - name
    - grade
    - major
    - money
## 查看是否已经登录
- 发送
    - op=check
- 接收
    - code 0,2
## 退出登录
- 发送
    - op=logout
- 接收
    - code 0,2
## 注册
- 发送
    - op=signup
    - number
    - password
    - phone
    - grade
    - major
    - imageurl
- 接收
    - code 0,5
## 取消信息/订单
- 发送
    - op=cancelOrder
    - id 信息编号
- 接收
    - code 0,2,3,4
## 完成订单
- 发送
    - op=finishOrder
    - id 信息编号
- 接收
    - code 0,2,3,4